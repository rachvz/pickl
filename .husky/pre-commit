#!/bin/sh

# Check if committing to protected branches
branch="$(git rev-parse --abbrev-ref HEAD)"

if [ "$branch" = "main" ] || [ "$branch" = "master" ]; then
  echo "âŒ Direct commits to '$branch' branch are not allowed!"
  echo ""
  echo "ğŸ’¡ Please create a feature branch instead."
  echo "ğŸ“š See docs/BRANCHING-STRATEGY.md for branch naming conventions"
  exit 1
fi

# Run lint-staged to check and fix staged files
npx lint-staged
